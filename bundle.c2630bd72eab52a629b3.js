(()=>{"use strict";var t,e={260:(t,e,n)=>{var o=n(440),r=n.n(o);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var c=function(){return t=function t(e,n,o,r,i,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{useImage:!0,draggable:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.x=n,this.y=o,this.scale=i,this.callback=s,a.useImage&&r&&(this.button=e.add.image(n,o,r).setScale(i).setInteractive(),this.button.on("pointerdown",s)),this.transparentButton=e.add.graphics(),this.updateTransparentButton(n,o,(a.width||this.button.width)*i,(a.height||this.button.height)*i),this.transparentButton.setInteractive(new Phaser.Geom.Rectangle(n,o,(a.width||this.button.width)*i,(a.height||this.button.height)*i),Phaser.Geom.Rectangle.Contains),this.transparentButton.on("pointerdown",s),a.draggable&&this.enableDragging()},(e=[{key:"updateTransparentButton",value:function(t,e,n,o){this.transparentButton.clear(),this.transparentButton.fillStyle(0,0),this.transparentButton.fillRect(t-n/2,e-o/2,n,o)}},{key:"setVisible",value:function(t){this.button&&this.button.setVisible(t),this.transparentButton.setVisible(t)}},{key:"setPosition",value:function(t,e){this.button&&this.button.setPosition(t,e),this.updateTransparentButton(t,e,this.button?this.button.width*this.button.scaleX:100*this.scale,this.button?this.button.height*this.button.scaleY:50*this.scale),this.transparentButton.setInteractive(new Phaser.Geom.Rectangle(t,e,this.button?this.button.width*this.button.scaleX:100*this.scale,this.button?this.button.height*this.button.scaleY:50*this.scale),Phaser.Geom.Rectangle.Contains)}},{key:"enableDragging",value:function(){var t=this;this.button?(this.button.setInteractive({draggable:!0}),this.scene.input.setDraggable(this.button),this.scene.input.on("drag",(function(e,n,o,r){n===t.button&&(n.x=o,n.y=r,t.setPosition(o,r))}))):(this.transparentButton.setInteractive({draggable:!0}),this.scene.input.setDraggable(this.transparentButton),this.scene.input.on("drag",(function(e,n,o,r){n===t.transparentButton&&t.setPosition(o,r)})))}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function u(t,e){return Number(Math.round(t+"e"+e)+"e-"+e).toFixed(e)}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,h(o.key),o)}}function h(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var p={volume:.25},d=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.createPopup(),this.hide()},(e=[{key:"createPopup",value:function(){var t=this;this.popupBackground=this.scene.add.graphics(),this.popupBackground.fillStyle(0,.8),this.popupBackground.fillRoundedRect(400,200,800,600,20),this.popupBackground.setDepth(10),this.closeButton=this.createText(1150,220,"X",11,(function(){return t.hide()})),this.configText=this.createText(600,300,"게임 설정 변경",11),this.soundConfigText=this.createText(500,400,"배경음악",11),this.soundConfigValue=this.createText(1e3,400,"25.00",11),this.soundSlider=this.createSlider(750,400,(function(e){t.soundConfigValue.setText(u(100*e,2)),p.volume=e})),this.textspeedConfigText=this.createText(500,600,"텍스트 속도",11),this.textspeedConfigValue=this.createText(1e3,600,"75.00",11),this.textSpeedSlider=this.createSlider(750,600,(function(e){t.textspeedConfigValue.setText(u(100*e,2)),console.log("텍스트 속도:",e)})),this.hide()}},{key:"createText",value:function(t,e,n,o,r){var i=this.scene.add.text(t,e,n,{fontSize:"32px",fill:"#fff"});return i.setDepth(o),r&&(i.setInteractive(),i.on("pointerdown",r)),i}},{key:"createSlider",value:function(t,e,n){var o=this.scene.add.graphics();o.fillStyle(8947848),o.fillRoundedRect(0,0,200,20,10),o.setPosition(t,e+10);var r=this.scene.add.graphics();return r.fillStyle(13619151),r.fillCircle(0,0,10),r.setPosition(t+150,e+20),r.setInteractive(new Phaser.Geom.Circle(0,0,10),Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(r),r.on("drag",(function(e,o){o>=t&&o<=t+200&&(r.x=o,n((o-t)/200))})),o.setDepth(11),r.setDepth(12),{track:o,thumb:r}}},{key:"show",value:function(){this.setVisible(!0)}},{key:"hide",value:function(){this.setVisible(!1)}},{key:"setVisible",value:function(t){this.popupBackground.setVisible(t),this.closeButton.setVisible(t),this.configText.setVisible(t),this.soundConfigText.setVisible(t),this.soundConfigValue.setVisible(t),this.soundSlider.track.setVisible(t),this.soundSlider.thumb.setVisible(t),this.textspeedConfigText.setVisible(t),this.textspeedConfigValue.setVisible(t),this.textSpeedSlider.track.setVisible(t),this.textSpeedSlider.thumb.setVisible(t)}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,m(o.key),o)}}function m(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}function g(t,e,n){return e=w(e),function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}var O=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,e,[{key:"intro"}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"init",value:function(t){this.fadeIn=t.fadeIn}},{key:"preload",value:function(){this.load.image("introBackground","./assets/introBackground.jpg"),this.load.image("startButton","./assets/icon/startButton.png"),this.load.image("configButton","./assets/icon/configButton.png"),this.load.image("logo","./assets/icon/logo.png"),this.load.image("credit","./assets/icon/credit.png"),this.load.audio("introBgm","./assets/sound/No.8 Requiem - Esther Abrami.mp3")}},{key:"create",value:function(){var t=this;this.fadeIn&&this.cameras.main.fadeIn(1e3,0,0,0),this.add.image(this.scale.width/2,this.scale.height/2+75,"introBackground").setScale(.99),this.add.image(this.scale.width/2-650,this.scale.height/2-325,"logo").setScale(1),this.introBgm=this.sound.add("introBgm",{loop:!0}),this.introBgm.setVolume(p.volume),this.introBgm.play(),this.startButton=new c(this,1750,550,"startButton",.7,(function(){t.introBgm.stop(),t.time.delayedCall(100,(function(){return t.scene.start("textScene",{fadeIn:!0})}))})),this.configButton=new c(this,1750,675,"configButton",.7,(function(){return t.configPopup.show()})),this.configPopup=new d(this),this.creditButton=new c(this,1745,775,"credit",.8,(function(){}))}}])&&b(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,P(o.key),o)}}function P(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=S(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}var j=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e,this.path=n,this.isAudio=n.endsWith(".mp3")||n.endsWith(".wav")},(e=[{key:"load",value:function(t){this.isAudio?t.load.audio(this.key,this.path):t.load.image(this.key,this.path)}}])&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,C(o.key),o)}}function C(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}var _=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.currentContentIndex=0,this.currentCharIndex=0,this.displayText="",this.logContent=[],this.complete=!1},(e=[{key:"getCurrentText",value:function(){return this.data[this.currentContentIndex].text}},{key:"getCurrentCharacterName",value:function(){return this.data[this.currentContentIndex].characterName}},{key:"getCurrentImageKey",value:function(){return this.data[this.currentContentIndex].images}},{key:"getCurrentSoundKey",value:function(){return this.data[this.currentContentIndex].soundKey}},{key:"getCurrentColor",value:function(){return this.data[this.currentContentIndex].color||"#000000"}},{key:"isCurrentBold",value:function(){return this.data[this.currentContentIndex].bold||!1}},{key:"getCurrentDelay",value:function(){return this.data[this.currentContentIndex].delay||0}},{key:"addCharToDisplayText",value:function(){var t=this.getCurrentText();return this.currentCharIndex<t.length&&(this.displayText+=t[this.currentCharIndex],this.currentCharIndex++),this.displayText}},{key:"isComplete",value:function(){return this.currentCharIndex>=this.getCurrentText().length||this.complete}},{key:"moveToNext",value:function(){return console.log("현재 인덱스:",this.currentContentIndex),console.log("완료 여부:",this.isComplete()),!!(this.currentContentIndex<this.data.length-1&&this.isComplete())&&(this.currentContentIndex++,this.currentCharIndex=0,this.displayText="",this.complete=!1,console.log("다음 인덱스로 이동:",this.currentContentIndex),!0)}},{key:"showImages",value:function(t,e,n){t.forEach((function(t){var o=t.imageKey,r=t.showImage,i=t.fadeIn,s=t.fadeOut,a=t.color;if(e[o]){var c=e[o];r?(i?(c.setVisible(!0),c.setAlpha(0),n.tweens.add({targets:c,alpha:{from:0,to:1},duration:500,ease:"Linear"})):c.setVisible(!0),a&&c.setTint(Phaser.Display.Color.HexStringToColor(a).color)):s?n.tweens.add({targets:c,alpha:{from:1,to:0},duration:500,ease:"Linear",onComplete:function(){c.setVisible(!1)}}):c.setVisible(!1)}}))}},{key:"resetImageColor",value:function(t){t.clearTint()}},{key:"addToLog",value:function(){this.logContent.push(this.displayText)}},{key:"getLog",value:function(){return this.logContent.join("\n\n")}},{key:"setComplete",value:function(){this.complete=!0}}])&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,I(o.key),o)}}function I(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=B(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}var z=function(){return t=function t(e,n,o,r,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.container=e.add.container(n,o).setDepth(100),this.background=e.add.rectangle(0,0,r,i,0,.8).setOrigin(.5),this.closeButton=e.add.text(r/2-60,-i/2+20,"Close",{font:"18px Arial",fill:"#ff0000"}).setInteractive(),this.textContainer=e.add.container(-r/2+10,-i/2+10),this.mask=e.add.graphics(),this.mask.fillRect(-r/2+10,-i/2+10,r-20,i-40),this.textContainer.setMask(new Phaser.Display.Masks.GeometryMask(e,this.mask)),this.container.add([this.background,this.closeButton,this.textContainer]),this.container.setVisible(!1),this.logText=null,this.scrollY=0,this.logContent=[],this.closeButton.on("pointerdown",(function(){return s.toggleVisibility()})),e.input.on("wheel",(function(t,e,n,o,r){s.container.visible&&(s.scrollY-=o,s.logText&&(s.scrollY=Phaser.Math.Clamp(s.scrollY,-s.logText.height+(i-40),0),s.logText.y=s.scrollY))}))},(e=[{key:"updateLog",value:function(t){this.logContent.push(t);var e=this.logContent.join("\n\n");this.logText&&this.logText.destroy(),this.logText=this.scene.add.text(0,0,e,{font:"18px Arial",fill:"#000000",wordWrap:{width:580}}),this.textContainer.removeAll(!0),this.textContainer.add(this.logText),this.logText.y=this.scrollY}},{key:"toggleVisibility",value:function(){this.container.setVisible(!this.container.visible),this.container.visible&&this.updateLog(this.scene.content.getLog())}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function R(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,A(o.key),o)}}function A(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=D(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}function L(t,e,n){return e=M(e),function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N()?Reflect.construct(e,n||[],M(t).constructor):e.apply(t,n))}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}var W=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=L(this,e,[{key:"talk1Scene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("gregor","./assets/character/gregor.png"),new j("gregor_hand","./assets/character/gregor_hand.png"),new j("harmatz","./assets/character/harmatz.png"),new j("news","./assets/news.png"),new j("skipButton","./assets/skipButton.png"),new j("office_back","./assets/office_back.png"),new j("knock","./assets/sound/knock.mp3"),new j("door_open","./assets/sound/door_open.mp3"),new j("door_close","./assets/sound/door_close.mp3"),new j("backMusic","./assets/sound/TRAVELATOR - Density & Time.mp3")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("talk1Data","./assets/text/talk1Data.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3);var e=this.cache.json.get("talk1Data").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11),r={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!0),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),gregor_hand:this.add.image(300,425,"gregor_hand").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),harmatz:this.add.image(1600,425,"harmatz").setScale(1).setOrigin(.5,.5).setScale(-1,1).setDepth(9).setVisible(!1),news:this.add.image(this.scale.width/2,this.scale.height/2,"news").setScale(.9).setOrigin(.5,.5).setDepth(9).setVisible(!1),office_back:this.add.image(this.scale.width/2,this.scale.height/2,"office_back").setScale(1).setOrigin(.5,.5).setVisible(!0)};this.backMusic=this.sound.add("backMusic",{loop:!0}).setVolume(p.volume),this.backMusic.play();var i=new z(this,this.scale.width/2,this.scale.height/2,600,700),s=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),i.updateLog(t.content.getLog());var s=t.content.data[t.content.currentContentIndex].images;s.length>0&&s.forEach((function(e){var n=e.imageKey;r[n]&&r[n].texture?t.content.showImages(s,r,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},a=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,i=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;r[e]&&(r[e].setVisible(t.showImage),t.color?r[e].setTint(Phaser.Display.Color.HexStringToColor(t.color).color):r[e].clearTint())})),t.content.showImages(e,r,t),t.textEvent=t.time.addEvent({delay:100,callback:s,loop:!0})}),i)};a(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),a()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.scene.start("firstNumPuzzle",{fadeIn:!0}))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),i.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.scene.start("firstNumPuzzle",{fadeIn:!0})})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return i.toggleVisibility()}))}}])&&R(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,H(o.key),o)}}function H(t){var e=function(t,e){if("object"!=F(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==F(e)?e:e+""}var Y=function(){return t=function t(e,n,o,r,i){var s=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fff",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"100%",l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.x=n,this.y=o,this.width=r,this.height=i,this.modalElement=document.createElement("div"),this.modalElement.style.position="absolute",this.modalElement.style.top="".concat(this.y,"px"),this.modalElement.style.left="".concat(this.x,"px"),this.modalElement.style.width="".concat(this.width,"px"),this.modalElement.style.height="".concat(this.height,"px");var f=this.hexToRgb(a);if(this.modalElement.style.backgroundColor="rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(c,")"),this.modalElement.style.padding="20px",this.modalElement.style.display="none",this.inputField=document.createElement("input"),this.inputField.type="text",this.inputField.placeholder="정답을 입력하세요",this.inputField.style.width=u,this.modalElement.appendChild(this.inputField),l){var h=document.createElement("button");h.innerText="닫기",h.onclick=function(){return s.hide()},this.modalElement.appendChild(h)}var p=document.createElement("button");p.innerText="확인",p.onclick=function(){return s.submitText()},this.modalElement.appendChild(p),document.body.appendChild(this.modalElement)},(e=[{key:"hexToRgb",value:function(t){var e=parseInt(t.replace(/^#/,""),16);return{r:e>>16&255,g:e>>8&255,b:255&e}}},{key:"show",value:function(){this.modalElement.style.display="block"}},{key:"hide",value:function(){this.modalElement.style.display="none"}},{key:"getText",value:function(){return this.inputField.value}},{key:"submitText",value:function(){var t=this.getText();this.scene.checkAnswer(t)}},{key:"setText",value:function(t){this.inputField.value=t}}])&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,U(o.key),o)}}function U(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=X(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}function J(t,e,n){return e=Z(e),function(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Q()?Reflect.construct(e,n||[],Z(t).constructor):e.apply(t,n))}function Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Q=function(){return!!t})()}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}var tt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=J(this,e,[{key:"officeScene"}])).assets=[new j("office","./assets/office.png"),new j("draggtest","./assets/draggtest.png"),new j("numPuzzle","./assets/numPuzzle.png"),new j("Xicon","./assets/Xicon.png")],t.numPuzzleAnswer="14",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),n=e,(o=[{key:"init",value:function(t){this.fadeIn=t.fadeIn}},{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.fadeIn&&this.cameras.main.fadeIn(100,0,0,0),this.add.image(this.scale.width/2,this.scale.height/2,"office").setOrigin(.5,.55).setScale(.99),this.letter=new c(this,1050,700,"",1,(function(){console.log("Button clicked"),t.modal.hide(),t.time.delayedCall(100,(function(){return t.scene.start("talk1Scene",{fadeIn:!0})}))}),{useImage:!1,width:150,height:150}),this.modal=new Y(this,100,150,300,50),this.modaltest=new c(this,600,600,"",1,(function(){console.log("Button clicked"),t.time.delayedCall(100,(function(){return t.modal.show()}))}),{useImage:!0,width:150,height:50}),this.book=new c(this,1350,150,"",1,(function(){console.log("Button clicked"),t.modal.hide(),t.time.delayedCall(100,(function(){return t.scene.start("textPuzzle1",{fadeIn:!0})}))}),{useImage:!1,width:150,height:150})}},{key:"update",value:function(){}},{key:"displayText",value:function(t){this.displayedText.setText(t)}},{key:"checkAnswer",value:function(t){t===this.numPuzzleAnswer?this.displayText("정답입니다!"):this.modal.hide()}}])&&q(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ot(o.key),o)}}function ot(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=et(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:e+""}function rt(t,e,n){return e=st(e),function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,it()?Reflect.construct(e,n||[],st(t).constructor):e.apply(t,n))}function it(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(it=function(){return!!t})()}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}var ct=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rt(this,e,[{key:"firstNumPuzzle"}])).assets=[new j("numPuzzle","./assets/numPuzzle.png"),new j("office_back","./assets/office_back.png")],t.numPuzzleAnswer="14",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){this.cameras.main.fadeIn(1e3),this.add.image(this.scale.width/2,this.scale.height/2,"office_back").setScale(1).setOrigin(.5,.5).setDepth(-1),this.add.image(this.scale.width/2,this.scale.height/2-100,"numPuzzle").setOrigin(.5,.5).setScale(.7),this.numPuzzleAnswerSheet=new Y(this,this.scale.width/2-200,800,300,50,"#000000",0,"80%",!1),this.numPuzzleAnswerSheet.show()}},{key:"checkAnswer",value:function(t){var e=this;t===this.numPuzzleAnswer?(this.numPuzzleAnswerSheet.hide(),this.time.delayedCall(100,(function(){return e.scene.start("talk2Scene",{fadeIn:!0})}))):console.log("틀린 답변입니다.")}}])&&nt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ft(o.key),o)}}function ft(t){var e=function(t,e){if("object"!=ut(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=ut(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ut(e)?e:e+""}function ht(t,e,n){return e=dt(e),function(t,e){if(e&&("object"===ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pt()?Reflect.construct(e,n||[],dt(t).constructor):e.apply(t,n))}function pt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pt=function(){return!!t})()}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yt(t,e)}var bt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ht(this,e,[{key:"talk2Scene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("gregor","./assets/character/gregor.png"),new j("harmatz","./assets/character/harmatz.png"),new j("skipButton","./assets/skipButton.png"),new j("office_back","./assets/office_back.png"),new j("backMusic","./assets/sound/TRAVELATOR - Density & Time.mp3")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("talk2Data","./assets/text/talk2Data.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3);var e=this.cache.json.get("talk2Data").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:this.content.isCurrentBold()?"bold 24px '국립박물관문화재단클래식B'":"24px '국립박물관문화재단클래식B'",fill:this.content.getCurrentColor(),wordWrap:{width:this.scale.width-100}}).setDepth(11),r={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!0),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),harmatz:this.add.image(1600,425,"harmatz").setScale(1).setOrigin(.5,.5).setScale(-1,1).setDepth(9).setVisible(!1),office_back:this.add.image(this.scale.width/2,this.scale.height/2,"office_back").setScale(1).setOrigin(.5,.5).setVisible(!0)};this.backMusic=this.sound.add("backMusic",{loop:!0}).setVolume(.75);var i=new z(this,this.scale.width/2,this.scale.height/2,600,700),s=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),i.updateLog(t.content.getLog());var s=t.content.data[t.content.currentContentIndex].images;s.length>0&&s.forEach((function(e){var n=e.imageKey;r[n]&&r[n].texture?t.content.showImages(s,r,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},a=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,i=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;r[e]&&(r[e].setVisible(t.showImage),t.color?r[e].setTint(Phaser.Display.Color.HexStringToColor(t.color).color):r[e].clearTint())})),t.content.showImages(e,r,t),t.textEvent=t.time.addEvent({delay:100,callback:s,loop:!0})}),i)};a(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),a()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.backMusic.stop(),t.cameras.main.fadeOut(1500),t.cameras.main.on("camerafadeoutcomplete",(function e(n){t.scene.start("memoryScene",{fadeIn:!0}),t.cameras.main.off("camerafadeoutcomplete",e)})))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),i.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.backMusic.stop(),t.cameras.main.fadeOut(1500),t.cameras.main.on("camerafadeoutcomplete",(function e(n){t.scene.start("memoryScene",{fadeIn:!0}),t.cameras.main.off("camerafadeoutcomplete",e)}))})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return i.toggleVisibility()}))}}])&&lt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function gt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,vt(o.key),o)}}function vt(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=mt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mt(e)?e:e+""}function wt(t,e,n){return e=Ot(e),function(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xt()?Reflect.construct(e,n||[],Ot(t).constructor):e.apply(t,n))}function xt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xt=function(){return!!t})()}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}var kt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=wt(this,e,[{key:"stationScene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("gregor","./assets/character/gregor.png"),new j("harmatz","./assets/character/harmatz.png"),new j("skipButton","./assets/skipButton.png"),new j("station","./assets/station.png"),new j("Rumen","./assets/Rumen.png"),new j("train_horn","./assets/sound/train_horn.mp3"),new j("train_run","./assets/sound/train_run.mp3"),new j("stationSound","./assets/sound/station.mp3"),new j("backMusic","./assets/sound/TRAVELATOR - Density & Time.mp3"),new j("office_back","./assets/office_back.png")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("stationData","./assets/text/stationData.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1500);var e=this.cache.json.get("stationData").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11),i={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!1),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),harmatz:this.add.image(1600,425,"harmatz").setScale(1).setOrigin(.5,.5).setScale(-1,1).setDepth(9).setVisible(!1),station:this.add.image(this.scale.width/2,this.scale.height/2,"station").setScale(1).setOrigin(.5,.5).setVisible(!1).setDepth(2),Rumen:this.add.image(this.scale.width/2,this.scale.height/2,"Rumen").setScale(1).setOrigin(.5,.5).setVisible(!1).setDepth(9),office_back:this.add.image(this.scale.width/2,this.scale.height/2,"office_back").setScale(1).setOrigin(.5,.5).setVisible(!1).setDepth(2)};this.backMusic=this.sound.add("backMusic",{loop:!0}).setVolume(p.volume),this.backMusic.play(),this.add.text(this.scale.width/2,this.scale.height/2,"그렇게 노인이 뱉은 말을 의문으로 뒤로 한 채, 그레고르는 다음 날 저녁이 되어 기차역으로 향했다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5);var s=new z(this,this.scale.width/2,this.scale.height/2,600,700),a=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),s.updateLog(t.content.getLog());var r=t.content.data[t.content.currentContentIndex].images;r.length>0&&r.forEach((function(e){var n=e.imageKey;i[n]&&i[n].texture?t.content.showImages(r,i,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},u=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,s=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;i[e]&&(i[e].setVisible(t.showImage),t.color?i[e].setTint(r().Display.Color.HexStringToColor(t.color).color):i[e].clearTint())})),t.content.showImages(e,i,t),t.textEvent=t.time.addEvent({delay:100,callback:a,loop:!0})}),s)};u(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),u()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.scene.start("rumenPuzzle",{fadeIn:!0}))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),s.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.scene.start("rumenPuzzle",{fadeIn:!0})})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return s.toggleVisibility()}))}},{key:"update",value:function(){}}])&&gt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Tt(o.key),o)}}function Tt(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Pt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pt(e)?e:e+""}function Et(t,e,n){return e=_t(e),function(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ct()?Reflect.construct(e,n||[],_t(t).constructor):e.apply(t,n))}function Ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ct=function(){return!!t})()}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}function Bt(t,e){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bt(t,e)}var Vt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Et(this,e,[{key:"frontdoorScene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("gregor","./assets/character/gregor.png"),new j("door_lock","./assets/door_lock.jpeg"),new j("door_unlock","./assets/door_unlock.jpeg"),new j("key_get","./assets/key_get.png"),new j("unlock","./assets/sound/door_open.mp3")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bt(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("frontdoorData","./assets/text/frontdoorData.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3);var e=this.cache.json.get("frontdoorData").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11),r={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!1),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),door_lock:this.add.image(this.scale.width/2,this.scale.height/2,"door_lock").setOrigin(.5,.55).setScale(1.1).setVisible(!0),door_unlock:this.add.image(this.scale.width/2,this.scale.height/2,"door_unlock").setOrigin(.5,.55).setScale(1.1).setVisible(!1),key_get:this.add.image(this.scale.width/2,this.scale.height/2,"key_get").setOrigin(.5,.5).setScale(1).setVisible(!1)};this.characterName=this.add.text(100,this.scale.height-225,"그레고르",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11).setVisible(!1),this.line=this.add.text(50,this.scale.height-135,"...이제 들어갈 수 있겠군",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1);var i=new z(this,this.scale.width/2,this.scale.height/2,600,700);this.lock=new c(this,this.scale.width/2,this.scale.height/2,"",1,(function(){r.textbox.setVisible(!0),t.characterName.setVisible(!0),t.line.setVisible(!0),t.spaceKeyEventAdded||(t.input.keyboard.on("keydown-SPACE",(function(){t.sound.play("unlock"),r.textbox.setVisible(!1),r.door_lock.setVisible(!1),r.door_unlock.setVisible(!0),t.characterName.setVisible(!1),t.line.setVisible(!1),t.time.delayedCall(500,(function(){return t.scene.start("endScene",{fadeIn:!0})}))})),t.spaceKeyEventAdded=!0)}),{useImage:!1,width:150,height:150});var s=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&t.sound.play(e),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),i.updateLog(t.content.getLog());var s=t.content.data[t.content.currentContentIndex].images;s.length>0&&s.forEach((function(e){var n=e.imageKey;r[n]&&r[n].texture?t.content.showImages(s,r,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},a=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,i=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;r[e]&&(r[e].setVisible(t.showImage),t.color?r[e].setTint(Phaser.Display.Color.HexStringToColor(t.color).color):r[e].clearTint())})),t.content.showImages(e,r,t),t.textEvent=t.time.addEvent({delay:100,callback:s,loop:!0})}),i)};a(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),a()):(console.log("모든 대사가 끝났음. "),r.textbox.setVisible(!1),r.gregor.setVisible(!1),n.setVisible(!1),o.setVisible(!1))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),i.updateLog(t.content.getLog()))}))}}])&&jt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function zt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Dt(o.key),o)}}function Dt(t){var e=function(t,e){if("object"!=It(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=It(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}function Rt(t,e,n){return e=Lt(e),function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,At()?Reflect.construct(e,n||[],Lt(t).constructor):e.apply(t,n))}function At(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(At=function(){return!!t})()}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lt(t)}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}var Mt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Rt(this,e,[{key:"frontdoorPuzzle"}])).assets=[new j("doorPuzzle","./assets/doorPuzzle.png")],t.doorPuzzleAnswer="3621371332",t.hint=null,t.hintbackground=null,t.isTextVisible=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){this.cameras.main.fadeIn(100),this.add.image(this.scale.width/2,this.scale.height/2-100,"doorPuzzle").setOrigin(.5,.5).setScale(1),this.doorPuzzleAnswerSheet=new Y(this,this.scale.width/2-150,800,300,50,"#000000",0,"80%",!1),this.doorPuzzleAnswerSheet.show()}},{key:"checkAnswer",value:function(t){var e=this;t===this.doorPuzzleAnswer?(this.doorPuzzleAnswerSheet.hide(),this.time.delayedCall(100,(function(){return e.scene.start("frontdoorScene",{fadeIn:!0})}))):console.log("틀린 답변입니다.")}}])&&zt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Wt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ft(o.key),o)}}function Ft(t){var e=function(t,e){if("object"!=Kt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Kt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kt(e)?e:e+""}function Gt(t,e,n){return e=Yt(e),function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ht()?Reflect.construct(e,n||[],Yt(t).constructor):e.apply(t,n))}function Ht(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ht=function(){return!!t})()}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}var qt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gt(this,e,[{key:"textPuzzle1"}])).assets=[new j("textPuzzle1","./assets/textPuzzle1.png"),new j("hintButton","./assets/icon/logButton.png")],t.doorPuzzleAnswer="죽음",t.hint=null,t.hintbackground=null,t.isTextVisible=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.add.image(this.scale.width/2,this.scale.height/2,"textPuzzle1"),this.doorPuzzleAnswerSheet=new Y(this,this.scale.width/2-150,800,300,50,"#000000",0,"80%",!1),this.doorPuzzleAnswerSheet.show(),this.hintbackground=this.add.rectangle(this.scale.width/2,this.scale.height/2,500,150,"#000000").setDepth(10).setOrigin(.5).setVisible(!1),this.hint=this.add.text(this.scale.width/2,this.scale.height/2,"나는 죽음이다.",{font:"48px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setDepth(11).setOrigin(.5,.5).setVisible(!1),this.add.image(this.scale.width-100,this.scale.height-850,"hintButton").setScale(.04).setInteractive().on("pointerdown",(function(){t.isTextVisible=!t.isTextVisible,t.hint.setVisible(t.isTextVisible),t.hintbackground.setVisible(t.isTextVisible)}))}},{key:"checkAnswer",value:function(t){var e=this;t===this.doorPuzzleAnswer?(this.doorPuzzleAnswerSheet.hide(),this.time.delayedCall(100,(function(){return e.scene.start("textPuzzle2",{fadeIn:!0})}))):console.log("틀린 답변입니다.")}}])&&Wt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Qt(o.key),o)}}function Qt(t){var e=function(t,e){if("object"!=Ut(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Ut(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ut(e)?e:e+""}function Zt(t,e,n){return e=te(e),function(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$t()?Reflect.construct(e,n||[],te(t).constructor):e.apply(t,n))}function $t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($t=function(){return!!t})()}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ee(t,e)}var ne=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Zt(this,e,[{key:"textPuzzle2"}])).assets=[new j("hintButton","./assets/icon/logButton.png")],t.doorPuzzleAnswer="공포",t.hint=null,t.hintbackground=null,t.isTextVisible=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.add.text(this.scale.width/2,this.scale.height/2-200,"나는 깊은 어둠 속에 있다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.add.text(this.scale.width/2,this.scale.height/2-100,"누구나 나를 느낀다. 나를 느끼지 못하는 자는 없다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.add.text(this.scale.width/2,this.scale.height/2,"나는 존재하지 않는다. 하지만 존재한다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.doorPuzzleAnswerSheet=new Y(this,this.scale.width/2-150,800,300,50,"#000000",0,"80%",!1),this.doorPuzzleAnswerSheet.show(),this.hintbackground=this.add.rectangle(this.scale.width/2,this.scale.height/2,500,150,"#000000").setDepth(10).setOrigin(.5).setVisible(!1),this.hint=this.add.text(this.scale.width/2,this.scale.height/2,"나는 공포다",{font:"48px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setDepth(11).setOrigin(.5,.5).setVisible(!1),this.add.image(this.scale.width-100,this.scale.height-850,"hintButton").setScale(.04).setInteractive().on("pointerdown",(function(){t.isTextVisible=!t.isTextVisible,t.hint.setVisible(t.isTextVisible),t.hintbackground.setVisible(t.isTextVisible)}))}},{key:"checkAnswer",value:function(t){var e=this;t===this.doorPuzzleAnswer?(this.doorPuzzleAnswerSheet.hide(),this.time.delayedCall(100,(function(){return e.scene.start("textPuzzle3",{fadeIn:!0})}))):console.log("틀린 답변입니다.")}}])&&Jt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function re(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ie(o.key),o)}}function ie(t){var e=function(t,e){if("object"!=oe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=oe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oe(e)?e:e+""}function se(t,e,n){return e=ce(e),function(t,e){if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ae()?Reflect.construct(e,n||[],ce(t).constructor):e.apply(t,n))}function ae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ae=function(){return!!t})()}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}function ue(t,e){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ue(t,e)}var le=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=se(this,e,[{key:"textPuzzle3"}])).assets=[new j("hintButton","./assets/icon/logButton.png")],t.doorPuzzleAnswer="죄책감",t.hint=null,t.hintbackground=null,t.isTextVisible=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.add.text(this.scale.width/2,this.scale.height/2-200,"나는 사람들의 마음 깊숙이 숨겨져 있으며, 결고 쉽게 드러나지 않는다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.add.text(this.scale.width/2,this.scale.height/2-100,"나는 과거의 선택에서 비롯되며, 때로는 그들을 괴롭히기도 한다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.add.text(this.scale.width/2,this.scale.height/2,"나는 누군가의 마음을 무겁게 만들고, 잊고 싶어도 결코 잊히지 않는다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.doorPuzzleAnswerSheet=new Y(this,this.scale.width/2-150,800,300,50,"#000000",0,"80%",!1),this.doorPuzzleAnswerSheet.show(),this.hintbackground=this.add.rectangle(this.scale.width/2,this.scale.height/2,500,150,"#000000").setDepth(10).setOrigin(.5).setVisible(!1),this.hint=this.add.text(this.scale.width/2,this.scale.height/2,"나는 죄책감이다",{font:"48px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setDepth(11).setOrigin(.5,.5).setVisible(!1),this.add.image(this.scale.width-100,this.scale.height-850,"hintButton").setScale(.04).setInteractive().on("pointerdown",(function(){t.isTextVisible=!t.isTextVisible,t.hint.setVisible(t.isTextVisible),t.hintbackground.setVisible(t.isTextVisible)}))}},{key:"checkAnswer",value:function(t){var e=this;t===this.doorPuzzleAnswer?(this.doorPuzzleAnswerSheet.hide(),this.time.delayedCall(100,(function(){return e.scene.start("endpage",{fadeIn:!0})}))):console.log("틀린 답변입니다.")}}])&&re(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function he(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,pe(o.key),o)}}function pe(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=fe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fe(e)?e:e+""}function de(t,e,n){return e=be(e),function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ye()?Reflect.construct(e,n||[],be(t).constructor):e.apply(t,n))}function ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ye=function(){return!!t})()}function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},be(t)}function me(t,e){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},me(t,e)}var ge=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=de(this,e,[{key:"textScene"}])).assets=[new j("boom","./assets/sound/boom.mp3"),new j("groan","./assets/sound/groan.mp3")],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.boom=this.sound.add("boom"),this.boom.setVolume(p.volume),this.boom.play(),this.groan=this.sound.add("groan",{loop:!0}),this.groan.setVolume(p.volume),this.groan.play(),this.add.text(this.scale.width/2,this.scale.height/2,"전쟁의 소음과 죽어가는 사람들의 비명이 한데 섞여 아수라장을 자아낸다.",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.input.keyboard.on("keydown-SPACE",(function(){t.groan.stop(),t.time.delayedCall(100,(function(){return t.scene.start("dreamScene",{fadeIn:!0})}))}))}}])&&he(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function we(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,xe(o.key),o)}}function xe(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=ve(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:e+""}function Oe(t,e,n){return e=ke(e),function(t,e){if(e&&("object"===ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Se()?Reflect.construct(e,n||[],ke(t).constructor):e.apply(t,n))}function Se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Se=function(){return!!t})()}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(t)}function Pe(t,e){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pe(t,e)}var je=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oe(this,e,[{key:"dreamScene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("skipButton","./assets/skipButton.png"),new j("dream","./assets/dream.png"),new j("littleGirlScreaming","./assets/sound/littleGirlScreming.mp3"),new j("knife","./assets/sound/knife.mp3"),new j("dreamMusic","./assets/sound/dream.mp3")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pe(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("dreamData","./assets/text/dreamData.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3);var e=this.cache.json.get("dreamData").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11),r={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!0),dream:this.add.image(this.scale.width/2,this.scale.height/2,"dream").setScale(1).setOrigin(.5,.5).setVisible(!0)};this.dreamMusic=this.sound.add("dreamMusic",{loop:!0}).setVolume(.75),this.dreamMusic.play();var i=new z(this,this.scale.width/2,this.scale.height/2,600,700),s=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),i.updateLog(t.content.getLog());var s=t.content.data[t.content.currentContentIndex].images;s.length>0&&s.forEach((function(e){var n=e.imageKey;r[n]&&r[n].texture?t.content.showImages(s,r,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},a=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,i=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;r[e]&&(r[e].setVisible(t.showImage),t.color?r[e].setTint(Phaser.Display.Color.HexStringToColor(t.color).color):r[e].clearTint())})),t.content.showImages(e,r,t),t.textEvent=t.time.addEvent({delay:100,callback:s,loop:!0})}),i)};a(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),a()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.dreamMusic.stop(),t.scene.start("officeScene",{fadeIn:!0}))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),i.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.dreamMusic.stop(),t.scene.start("officeScene",{fadeIn:!0})})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return i.toggleVisibility()}))}}])&&we(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ce(o.key),o)}}function Ce(t){var e=function(t,e){if("object"!=Te(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Te(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Te(e)?e:e+""}function _e(t,e,n){return e=Ve(e),function(t,e){if(e&&("object"===Te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Be()?Reflect.construct(e,n||[],Ve(t).constructor):e.apply(t,n))}function Be(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Be=function(){return!!t})()}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ve(t)}function Ie(t,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ie(t,e)}var ze=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=_e(this,e,[{key:"memoryScene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("gregor","./assets/character/gregor.png"),new j("harmatz","./assets/character/harmatz.png"),new j("skipButton","./assets/skipButton.png"),new j("office_back","./assets/office_back.png"),new j("lily","./assets/character/lily.png"),new j("lily_memory","./assets/sound/lily_memory.mp3"),new j("lily_serious","./assets/sound/lily_serious.mp3")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("memoryData","./assets/text/memoryData.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3);var e=this.cache.json.get("memoryData").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:this.content.isCurrentBold()?"bold 24px '국립박물관문화재단클래식B'":"24px '국립박물관문화재단클래식B'",fill:this.content.getCurrentColor(),wordWrap:{width:this.scale.width-100}}).setDepth(11),r={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!1),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),harmatz:this.add.image(1600,425,"harmatz").setScale(1).setOrigin(.5,.5).setScale(-1,1).setDepth(9).setVisible(!1),office_back:this.add.image(this.scale.width/2,this.scale.height/2,"office_back").setScale(1).setOrigin(.5,.5).setVisible(!1),lily:this.add.image(1600,425,"lily").setScale(1).setOrigin(.5,.5).setScale(-1,1).setDepth(9).setVisible(!1)},i=new z(this,this.scale.width/2,this.scale.height/2,600,700),s=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),i.updateLog(t.content.getLog());var s=t.content.data[t.content.currentContentIndex].images;s.length>0&&s.forEach((function(e){var n=e.imageKey;r[n]&&r[n].texture?t.content.showImages(s,r,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},a=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,i=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;r[e]&&(r[e].setVisible(t.showImage),t.color?r[e].setTint(Phaser.Display.Color.HexStringToColor(t.color).color):r[e].clearTint())})),t.content.showImages(e,r,t),t.textEvent=t.time.addEvent({delay:100,callback:s,loop:!0})}),i)};a(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),a()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.cameras.main.fadeOut(1500),t.cameras.main.on("camerafadeoutcomplete",(function e(n){t.scene.start("stationScene",{fadeIn:!0}),t.cameras.main.off("camerafadeoutcomplete",e)})))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),i.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.cameras.main.fadeOut(1500),t.cameras.main.on("camerafadeoutcomplete",(function e(n){t.scene.start("stationScene",{fadeIn:!0}),t.cameras.main.off("camerafadeoutcomplete",e)}))})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return i.toggleVisibility()}))}}])&&Ee(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}();function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Re(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ae(o.key),o)}}function Ae(t){var e=function(t,e){if("object"!=De(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=De(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==De(e)?e:e+""}function Le(t,e,n){return e=Me(e),function(t,e){if(e&&("object"===De(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ne()?Reflect.construct(e,n||[],Me(t).constructor):e.apply(t,n))}function Ne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ne=function(){return!!t})()}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function Ke(t,e){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ke(t,e)}var We=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Le(this,e,[{key:"rumenPuzzle"}])).assets=[new j("textbox","./assets/textbox.png"),new j("skipButton","./assets/skipButton.png"),new j("station","./assets/station.png"),new j("Rumen","./assets/Rumen.png")],t.numPuzzleAnswer="어둠",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ke(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){this.cameras.main.fadeIn(1e3),this.add.image(this.scale.width/2,this.scale.height/2,"station").setScale(1).setOrigin(.5,.5),this.textbox=this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!1),this.rumen=this.add.image(this.scale.width/2,this.scale.height/2,"Rumen").setScale(1).setOrigin(.5,.5).setVisible(!0).setDepth(9),this.characterName=this.add.text(100,this.scale.height-225,"그레고르",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11).setVisible(!1),this.answerTrue=this.add.text(50,this.scale.height-135,"어디서 많이 본 구절인데...",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1),this.answerFalse=this.add.text(50,this.scale.height-135,"잘못 넣어놨나 보군",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1),this.numPuzzleAnswerSheet=new Y(this,this.scale.width/2-200,800,300,50,"#000000",0,"80%",!1),this.numPuzzleAnswerSheet.show()}},{key:"checkAnswer",value:function(t){var e=this;t===this.numPuzzleAnswer?(this.numPuzzleAnswerSheet.hide(),this.textbox.setVisible(!0),this.characterName.setVisible(!0),this.answerTrue.setVisible(!0),this.input.keyboard.on("keydown-SPACE",(function(){e.time.delayedCall(100,(function(){return e.scene.start("station2Scene",{fadeIn:!0})}))}))):(this.numPuzzleAnswerSheet.hide(),this.textbox.setVisible(!0),this.characterName.setVisible(!0),this.answerFalse.setVisible(!0),this.input.keyboard.on("keydown-SPACE",(function(){e.time.delayedCall(100,(function(){return e.scene.start("station2Scene",{fadeIn:!0})}))})),console.log("틀린 답변입니다."))}}])&&Re(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,He(o.key),o)}}function He(t){var e=function(t,e){if("object"!=Fe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Fe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fe(e)?e:e+""}function Ye(t,e,n){return e=qe(e),function(t,e){if(e&&("object"===Fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xe()?Reflect.construct(e,n||[],qe(t).constructor):e.apply(t,n))}function Xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xe=function(){return!!t})()}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ue(t,e)}var Je=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ye(this,e,[{key:"station2Scene"}])).assets=[new j("textbox","./assets/textbox.png"),new j("logButton","./assets/icon/logButton.png"),new j("gregor","./assets/character/gregor.png"),new j("skipButton","./assets/skipButton.png"),new j("station","./assets/station.png"),new j("map","./assets/map.png"),new j("train_horn","./assets/sound/train_horn.mp3"),new j("train_run","./assets/sound/train_run.mp3"),new j("stationSound","./assets/sound/station.mp3"),new j("backMusic","./assets/sound/TRAVELATOR - Density & Time.mp3"),new j("train","./assets/train.png"),new j("walk","./assets/sound/walk.mp3"),new j("house","./assets/introBackground.jpg")],t.content=null,t.textEvent=null,t.currentImage=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)})),this.load.json("station2Data","./assets/text/station2Data.json")}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1500);var e=this.cache.json.get("station2Data").contents;this.content=new _(e);var n=this.add.text(100,this.scale.height-225,"",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11),o=this.add.text(50,this.scale.height-135,"",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11),i={textbox:this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!0),gregor:this.add.image(300,425,"gregor").setScale(1).setOrigin(.5,.5).setDepth(9).setVisible(!1),station:this.add.image(this.scale.width/2,this.scale.height/2,"station").setScale(1).setOrigin(.5,.5).setVisible(!0).setDepth(2),train:this.add.image(this.scale.width/2,this.scale.height/2,"train").setScale(1).setOrigin(.5,.5).setVisible(!0).setDepth(2),map:this.add.image(this.scale.width/2,this.scale.height/2,"map").setScale(1).setOrigin(.5,.5).setVisible(!1).setDepth(9),house:this.add.image(this.scale.width/2,this.scale.height/2,"house").setScale(1).setOrigin(.5,.5).setVisible(!1).setDepth(2)};this.backMusic=this.sound.add("backMusic",{loop:!0}).setVolume(.75),this.backMusic.play();var s=new z(this,this.scale.width/2,this.scale.height/2,600,700),a=function(){o.setText(t.content.addCharToDisplayText()),n.setText(t.content.getCurrentCharacterName());var e=t.content.getCurrentSoundKey();if(e&&(t.sound.setVolume(p.volume),t.sound.play(e)),t.content.isComplete()){t.time.removeEvent(t.textEvent),t.content.addToLog(),s.updateLog(t.content.getLog());var r=t.content.data[t.content.currentContentIndex].images;r.length>0&&r.forEach((function(e){var n=e.imageKey;i[n]&&i[n].texture?t.content.showImages(r,i,t):console.warn("Image ".concat(n," is not loaded yet."))}))}},u=function(){t.textEvent&&t.time.removeEvent(t.textEvent),o.setText(""),n.setText("");var e=t.content.data[t.content.currentContentIndex].images,s=t.content.getCurrentDelay();setTimeout((function(){e.forEach((function(t){var e=t.imageKey;i[e]&&(i[e].setVisible(t.showImage),t.color?i[e].setTint(r().Display.Color.HexStringToColor(t.color).color):i[e].clearTint())})),t.content.showImages(e,i,t),t.textEvent=t.time.addEvent({delay:100,callback:a,loop:!0})}),s)};u(),this.input.keyboard.on("keydown-SPACE",(function(){console.log("스페이스바 눌림"),t.content.isComplete()?(console.log("대사가 완료됨. 다음 대사로 이동 시도"),t.content.moveToNext()?(console.log("다음 대사로 이동 성공"),u()):(console.log("모든 대사가 끝났음. 다음 씬으로 이동"),t.scene.start("doorScene",{fadeIn:!0}))):(console.log("대사가 아직 완료되지 않음"),t.time.removeEvent(t.textEvent),o.setText(t.content.getCurrentText()),n.setText(t.content.getCurrentCharacterName()),t.content.setComplete(),console.log("대사 완료 상태로 설정"),t.content.addToLog(),s.updateLog(t.content.getLog()))})),new c(this,this.scale.width-200,this.scale.height-850,"skipButton",.1,(function(){t.scene.start("doorScene",{fadeIn:!0})})),this.add.image(this.scale.width-100,this.scale.height-850,"logButton").setScale(.04).setInteractive().on("pointerdown",(function(){return s.toggleVisibility()}))}},{key:"update",value:function(){}}])&&Ge(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,$e(o.key),o)}}function $e(t){var e=function(t,e){if("object"!=Qe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=Qe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qe(e)?e:e+""}function tn(t,e,n){return e=nn(e),function(t,e){if(e&&("object"===Qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,en()?Reflect.construct(e,n||[],nn(t).constructor):e.apply(t,n))}function en(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(en=function(){return!!t})()}function nn(t){return nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nn(t)}function on(t,e){return on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},on(t,e)}var rn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=tn(this,e,[{key:"doorScene"}])).assets=[new j("door_lock","./assets/door_lock.jpeg"),new j("door_unlock","./assets/door_unlock.jpeg"),new j("doorPuzzle","./assets/doorPuzzle.png"),new j("textbox","./assets/textbox.png")],t.clickCount=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&on(t,e)}(e,t),n=e,(o=[{key:"init",value:function(t){this.fadeIn=t.fadeIn}},{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.fadeIn&&this.cameras.main.fadeIn(100,0,0,0),this.door_lock=this.add.image(this.scale.width/2,this.scale.height/2,"door_lock").setOrigin(.5,.55).setScale(1.1).setVisible(!0),this.door_unlock=this.add.image(this.scale.width/2,this.scale.height/2,"door_unlock").setOrigin(.5,.55).setScale(1.1).setVisible(!1),this.textbox=this.add.image(this.scale.width/2,this.scale.height/2-80,"textbox").setOrigin(.5,.5).setDepth(10).setScale(1).setVisible(!1),this.characterName=this.add.text(100,this.scale.height-225,"그레고르",{font:"48px '국립박물관문화재단클래식B'",fill:"#000000"}).setDepth(11).setVisible(!1),this.lines=[this.add.text(50,this.scale.height-135,"(굳게 잠겨있다, 열쇠가 필요한듯 하다.)",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1),this.add.text(50,this.scale.height-135,"열쇠가 필요해. 어딘가 보관해둔건가?",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1),this.add.text(50,this.scale.height-135,"...이상한 장치군... 뭔가 새겨져 있는데?",{font:"24px '국립박물관문화재단클래식B'",fill:"#000000",wordWrap:{width:this.scale.width-100}}).setDepth(11).setVisible(!1)],this.lock=new c(this,this.scale.width/2,this.scale.height/2,"",1,(function(){t.handleLockClick()}),{useImage:!1,width:150,height:150}),this.chest=new c(this,150,this.scale.height/2-50,"",1,(function(){console.log("Button clicked"),t.textbox.setVisible(!0),t.characterName.setVisible(!0),t.lines[2].setVisible(!0),t.input.keyboard.on("keydown-SPACE",(function(){t.time.delayedCall(100,(function(){return t.scene.start("frontdoorPuzzle",{fadeIn:!0})}))}))}),{useImage:!1,width:300,height:200})}},{key:"update",value:function(){}},{key:"handleLockClick",value:function(){this.clickCount++,this.hideAllLines(),1===this.clickCount?this.showTextBoxAndLines(0):2===this.clickCount?(this.showTextBoxAndLines(1),this.characterName.setVisible(!0)):(this.hideTextBoxAndLines(),this.clickCount=0)}},{key:"showTextBoxAndLines",value:function(t){this.textbox.setVisible(!0),this.lines[t].setVisible(!0)}},{key:"hideTextBoxAndLines",value:function(){this.textbox.setVisible(!1),this.characterName.setVisible(!1),this.lines.forEach((function(t){return t.setVisible(!1)}))}},{key:"hideAllLines",value:function(){this.lines.forEach((function(t){return t.setVisible(!1)}))}}])&&Ze(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function an(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,cn(o.key),o)}}function cn(t){var e=function(t,e){if("object"!=sn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=sn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sn(e)?e:e+""}function un(t,e,n){return e=fn(e),function(t,e){if(e&&("object"===sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ln()?Reflect.construct(e,n||[],fn(t).constructor):e.apply(t,n))}function ln(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ln=function(){return!!t})()}function fn(t){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fn(t)}function hn(t,e){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hn(t,e)}var pn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=un(this,e,[{key:"endScene"}])).assets=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.add.text(this.scale.width/2,this.scale.height/2,"이 게임은 베타 버전입니다. 이후 문제를 해결하시겠습니까?",{font:"48px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.yesBtn=this.add.text(this.scale.width/2-200,this.scale.height/2+200,"네",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5).setInteractive().on("pointerdown",(function(){console.log("버튼 클릭됨"),t.time.delayedCall(100,(function(){return t.scene.start("textPuzzle1",{fadeIn:!0})}))})),this.noBtn=this.add.text(this.scale.width/2+200,this.scale.height/2+200,"아니요",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5).setInteractive().on("pointerdown",(function(){console.log("버튼 클릭됨"),t.time.delayedCall(100,(function(){return t.scene.start("endpage",{fadeIn:!0})}))}))}}])&&an(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene);function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function yn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,bn(o.key),o)}}function bn(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=dn(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dn(e)?e:e+""}function mn(t,e,n){return e=vn(e),function(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gn()?Reflect.construct(e,n||[],vn(t).constructor):e.apply(t,n))}function gn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gn=function(){return!!t})()}function vn(t){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vn(t)}function wn(t,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wn(t,e)}var xn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=mn(this,e,[{key:"endpage"}])).assets=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(e,t),n=e,(o=[{key:"preload",value:function(){var t=this;this.assets.forEach((function(e){return e.load(t)}))}},{key:"create",value:function(){var t=this;this.cameras.main.fadeIn(1e3),this.add.text(this.scale.width/2,this.scale.height/2-100,"플레이해주셔서 감사합니다.",{font:"48px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5),this.gointroBtn=this.add.text(this.scale.width/2,this.scale.height/2+200,"메인화면으로",{font:"32px '국립박물관문화재단클래식B'",fill:"#bb0000"}).setOrigin(.5,.5).setInteractive().on("pointerdown",(function(){console.log("버튼 클릭됨"),t.time.delayedCall(100,(function(){return t.scene.start("intro",{fadeIn:!0})}))}))}}])&&yn(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Scene),On={type:r().AUTO,width:1900,height:910,scene:[O,ge,je,W,bt,ct,ze,tt,kt,We,Je,rn,Vt,Mt,qt,ne,le,pn,xn]};new(r().Game)(On)}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,n,r,i)=>{if(!n){var s=1/0;for(l=0;l<t.length;l++){for(var[n,r,i]=t[l],a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(o.O).every((t=>o.O[t](n[c])))?n.splice(c--,1):(a=!1,i<s&&(s=i));if(a){t.splice(l--,1);var u=r();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,r,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={792:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[s,a,c]=n,u=0;if(s.some((e=>0!==t[e]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var l=c(o)}for(e&&e(n);u<s.length;u++)i=s[u],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=o.O(void 0,[440],(()=>o(260)));r=o.O(r)})();